<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="generator" content="Some custom Common Lisp"><meta name="description" content="Blog archives for topic microarchitectural-musings"><script defer src="/static/fixes.js"></script><link rel="alternate" href="/feed.xml" title="Fanael's random ruminations" type="application/rss+xml"><link rel="stylesheet" href="/static/theme.css"><link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><title>Blog archives for topic microarchitectural-musings - Fanael's random ruminations</title></head><body><header id="top-header"><a id="skip-nav" class="at-only" href="#main">Skip to main content</a><span>Fanael's random ruminations</span></header><nav aria-label="Primary"><ul id="top-nav"><li><a href="/">Main page</a></li><li><a href="/archives/">Archives</a></li><li><a href="https://github.com/Fanael/fanael.github.io/">GitHub</a></li><li><a rel="author" href="/pages/about.html">About</a></li></ul></nav><main id="main"><header><h1>Archives for topic microarchitectural-musings</h1></header><nav class="toc" aria-labelledby="toc-label"><span id="toc-label">Table of contents</span><ol><li><a href="#is-x86-risc-internally">The legend of "x86 CPUs decode instructions into RISC form internally"</a></li></ol></nav><article id="is-x86-risc-internally"><header><h2><a href="/is-x86-risc-internally.html">The legend of "x86 CPUs decode instructions into RISC form internally"</a></h2><p>Published on the <time datetime="2020-06-30">30th of June 2020</time></p><p>Topics: <a href="/archives/topic-microarchitectural-musings.html">microarchitectural-musings</a>, <a href="/archives/topic-mythbusting.html">mythbusting</a></p></header><p>There is a widespread idea that modern high-performance x86 processors work by decoding the "complex" x86 instructions into "simple" RISC-like instructions that the rest of the pipeline then operates on. But how close is this idea to how the processors <em>actually</em> work internally?</p><p>To answer this question, let's analyze how different x86 processors, ranging from the first "modern" Intel microarchitecture, P6, to their current designs, handle the following simple loop (the code is 32-bit just to allow us to discuss very old x86 processors):</p><pre class="code-block"><span class="cx-language">x86 assembly</span>
<code class="cx-numbered"><span class="cx-ln"></span><span>.loop:
</span><span class="cx-ln"></span><span>    <span class="c-nf">add</span> [<span class="c-nb">edx</span>], <span class="c-nb">eax</span>
</span><span class="cx-ln"></span><span>    <span class="c-nf">add</span> <span class="c-nb">edx</span>, <span class="c-m">4</span>
</span><span class="cx-ln"></span><span>    <span class="c-nf">sub</span> <span class="c-nb">eax</span>, <span class="c-m">1</span>
</span><span class="cx-ln"></span><span>    <span class="c-nf">jnz</span> .loop
</span></code></pre><a class="read-full" href="/is-x86-risc-internally.html" aria-label="Read the full article: The legend of &quot;x86 CPUs decode instructions into RISC form internally&quot;">Read the full article…</a></article></main><nav aria-label="Chronological, secondary"><ul id="order-nav"><li class="top"><a href="#skip-nav"><span aria-hidden="true">↑ </span>Top<span aria-hidden="true"> ↑</span></a></li><li class="prev"></li><li><a href="/archives/">Blog archives</a></li><li class="next"></li></ul></nav><footer><ul id="footer"><li><a href="/pages/offline-mode.html">Offline mode</a></li><li>Powered by HTML &amp; CSS</li><li>Copyright © 2019-2022 Fanael Linithien</li><li>Licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a></li></ul></footer></body></html>